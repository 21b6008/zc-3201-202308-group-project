# UNITY (C#)

- Problem for WebGL when trying to use sockets need to use a javscript plugin to create sockets, for our project we use the endel/NativeWebsockets from github to provide sockets. Since this implementation works for both WebGL and Mobile.
- Problem in Unity Editor when closing sockets, when closing sockets Unity Editor will freeze if the script tries to close a null socket or an already closed socket due to running close socket more than once. To fix this first check whether or not the socket is null then check if the socket is open, if it's not open skip otherwise close socket. 
- Problem when trying to build the app after importing the digital twin of the niryo robot using the URDF importer package added through git url, the error will be due to conflict of having two of the same plugins present, to fix this one of them needs to be disabled for target build platform, but by adding the URDP package through git url it is impossible to change the settings for the plugins as the inspector will be greyed out. Solution, instead of adding it through git url, first clone the repository to your device and then add it to the package manager through disk. By doing this you can now change the settings for the plugin through the inspector as it is no longer greyed out.
- Problem processing messages, when messages are received in the websockets we used it does not immediately process it following the OnMessage that was declared, rather we need to call the function DispatchMessageQueue() which then processes all the messages that were in the queue following what was declared in OnMessage.
- Problem for image loading, to load the image we receive that is in byte array form we use the Texture2D function LoadImage(ByteArray), when using this function the size of the Texture2D and the ByteArray used must match meaning if the size of the image in the byte array is 512x512 our Texture2D also needs to be created with 512x512.
- Problem for image streaming, instead of having the server continuously sending the image to the client automatically, the client sends a request for the image every 0.2 seconds as we were not able to find a way to have the server continuously send images while no message is receiver or have the image streaming on a different socket as only one active connection is possible to the robot at a time. This may cause the server's queue buffer to overflow occasionally causing the server to stop as we are sending requests to the server continously. This error does not happen often as sometimes it will not crash after leaving it open for a long time. 
- Problem regarding sending commands to the server, the server seems to crash after we connect our client socket to the server socket and we try to send a command immediately after. The solution to this is to wait 1-2 seconds to let the server go through all the messages sent first requesting for image.
- Problem regarding command latency, sometimes it may take some time for the server to execute the command sent by our client as it has to go through all the queue of image requests before getting to the command we sent in the queue.

#  SERVER (Python)

- Problem for connecting to robot, it is only possible to have one active connection with the robot at a time, meaning that we had to use one socket for both sending the image to the client and receiving instructions from the client. This may be a problem as it is possible the server socket may crash due to handling both receiving messages and continuously sending images to the client.
- Problem for connecting to the robot, since the server is hardcoded with the IP Address of the robot and it is not possible to get the robot's IP address through code, if the robot's IP Address changes the server will not be able to connect to the robot. To fix this check what the IP Address of the robot through the Niryo Studio application and change the IP Address in the server's code to match the new IP Address.
- Problem with the Niryo Robot, when first using the robot it's Raspberry Pi Image needed to be updated as the image at the time was outdated and not compatible with the newest version of Niryo Studio, it was not possible to update it using old Niryo Studio version. To update it the robot needed to be disassembled to access the Raspberry PI to update its image.
